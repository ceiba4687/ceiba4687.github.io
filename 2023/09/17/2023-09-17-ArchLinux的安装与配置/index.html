<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/project/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/project/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/project/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/project/images/logo.svg" color="#222">

<link rel="stylesheet" href="/project/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"ceiba4687.github.io","root":"/project/","images":"/project/images","scheme":"Pisces","darkmode":true,"version":"8.18.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/project/js/config.js"></script>

    <meta name="description" content="Arch Linux安装安装前准备 官方网站：Arch LinuxArch Wiki：ArchWiki (archlinux.org)Ventory：Ventoy">
<meta property="og:type" content="article">
<meta property="og:title" content="Arch">
<meta property="og:url" content="http://ceiba4687.github.io/project/2023/09/17/2023-09-17-ArchLinux%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/index.html">
<meta property="og:site_name" content="Ceiba">
<meta property="og:description" content="Arch Linux安装安装前准备 官方网站：Arch LinuxArch Wiki：ArchWiki (archlinux.org)Ventory：Ventoy">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-09-17T02:10:40.000Z">
<meta property="article:modified_time" content="2023-09-18T01:04:19.143Z">
<meta property="article:author" content="Ceiba ZH">
<meta property="article:tag" content="Arch">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://ceiba4687.github.io/project/2023/09/17/2023-09-17-ArchLinux%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://ceiba4687.github.io/project/2023/09/17/2023-09-17-ArchLinux%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/","path":"2023/09/17/2023-09-17-ArchLinux的安装与配置/","title":"Arch"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Arch | Ceiba</title>
  








  <noscript>
    <link rel="stylesheet" href="/project/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/project/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ceiba</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Freedom</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/project/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/project/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/project/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/project/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Arch-Linux%E5%AE%89%E8%A3%85"><span class="nav-number">1.</span> <span class="nav-text">Arch Linux安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87"><span class="nav-number">1.1.</span> <span class="nav-text">安装前准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B"><span class="nav-number">1.2.</span> <span class="nav-text">安装流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E9%85%8D%E7%BD%AE"><span class="nav-number">1.3.</span> <span class="nav-text">系统配置</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ceiba ZH</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/project/archives/">
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/project/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/project/tags/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/ceiba4687" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ceiba4687" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:ceiba4687@gmail.com" title="E-Mail → mailto:ceiba4687@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://ceiba4687.github.io/project/2023/09/17/2023-09-17-ArchLinux%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/project/images/avatar.gif">
      <meta itemprop="name" content="Ceiba ZH">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ceiba">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Arch | Ceiba">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Arch
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2023-09-17 10:10:40" itemprop="dateCreated datePublished" datetime="2023-09-17T10:10:40+08:00">2023-09-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-18 09:04:19" itemprop="dateModified" datetime="2023-09-18T09:04:19+08:00">2023-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/project/categories/blog/" itemprop="url" rel="index"><span itemprop="name">blog</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/project/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="Word count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Word count in article: </span>
      <span>2.5k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>9 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Arch-Linux安装"><a href="#Arch-Linux安装" class="headerlink" title="Arch Linux安装"></a>Arch Linux安装</h2><h3 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h3><blockquote>
<p>官方网站：<a target="_blank" rel="noopener" href="https://archlinux.org/">Arch Linux</a><br>Arch Wiki：<a target="_blank" rel="noopener" href="https://wiki.archlinux.org/">ArchWiki (archlinux.org)</a><br>Ventory：<a target="_blank" rel="noopener" href="https://www.ventoy.net/cn/">Ventoy</a></p>
</blockquote>
<span id="more"></span>

<p>从官网的<a target="_blank" rel="noopener" href="https://archlinux.org/download/">Arch Linux下载页面</a>下载镜像之后，只需要复制到已经制作好的Ventory安装U盘中即可，制作VentoryU盘的方法参考<a target="_blank" rel="noopener" href="https://www.ventoy.net/cn/doc_start.html">Ventory文档手册</a>。</p>
<blockquote>
<p>通常来说，下载之后验证文件完整性和签名是必要的，但我懒得弄所以省去此步骤。</p>
</blockquote>
<p>针对我的设备，由于之前已经多次安装过Linux系统，也没有使用双系统的想法，所以直接执行全盘抹除安装，也很清楚系统是UEFI启动，因此不需要在BIOS中进行调整。多数情况下，也只需要禁用secure boot即可。</p>
<h3 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h3><ol>
<li><p>启动到live环境</p>
<p>！！！！确保当前运行的系统下无重要文件需要备份！！！！<br>在VentoryU盘插入之后，重启电脑，按F2键（长按或狂按或其他键）进入BIOS模式。在BIOS模式中禁用secure boot并调整启动项顺序，将U盘启动调整至第一位，然后保存设置并退出重启。<br>此次重启将默认进入Ventory启动，在图形界面中选择Arch Linux进行安装，引导选择GRUB或默认，进入Arch引导程序后，选择第一项：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arch Linux install medium (x86_64, UEFI)</span><br></pre></td></tr></table></figure>

<p>就会成功进入Arch Live环境</p>
</li>
<li><p>验证启动模式<br>新电脑默认UEFI，在此不再验证。</p>
</li>
<li><p>连接互联网<br>有线连接通常插上网线即可，在此记录无线连接步骤。<br>输入iwctl命令，进入iwd环境<br>输入 device list 得到本机网卡设备名称（通常为wlan0，<strong>下文中以wlan0代指</strong>）<br>扫描WiFi：station wlan0 scan<br>输出扫描结果：station wlan0 get-networks<br>记住你要连接的网络SSID，此字段在输出结果中的Network Name中，<strong>下文以MySSID代指</strong><br>连接网络：station wlan0 connect “MySSID”<br>输入密码即可，随后输入quit退出iwd环境<br>ping <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 以测试网络连接</p>
</li>
<li><p>更新系统时钟</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # timedatectl status</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>磁盘分区</strong></p>
<blockquote>
<p>以下分区表仅代表个人喜好，无通用性，首次尝试建议单独分区home！！</p>
</blockquote>
<table>
<thead>
<tr>
<th>挂载点</th>
<th>分区</th>
<th>分区类型</th>
<th>建议大小</th>
<th>备注</th>
<th>代码</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;mnt&#x2F;boot</td>
<td>&#x2F;dev&#x2F;nvme0n1p1</td>
<td>EFI</td>
<td>512M</td>
<td>ESP</td>
<td></td>
</tr>
<tr>
<td>&#x2F;mnt</td>
<td>&#x2F;dev&#x2F;nvme0n1p2</td>
<td>Linux x86_64 root</td>
<td>所有剩余空间</td>
<td>根分区</td>
<td></td>
</tr>
<tr>
<td>&#x2F;swap</td>
<td>&#x2F;dev&#x2F;nvme0n1p3</td>
<td>Swap</td>
<td>与内存大小相同</td>
<td>交换分区</td>
<td></td>
</tr>
</tbody></table>
<p>查看分区信息：fdisk -l<br>进入磁盘编辑：fdisk &#x2F;dev&#x2F;nvme0n1 （以nvme0n1为例）<br>确保在看到如下环境提示后进行</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # fdisk /dev/nvme0n1</span><br><span class="line"></span><br><span class="line">Welcome to fdisk (util-linux 2.xx).</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br></pre></td></tr></table></figure>

<p>输入 g 创建新的GPT分区表</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Command (m for help): n  # 输入 n 创建新的分区，这个分区将是 EFI 分区</span><br><span class="line">Partition number (1-128, default 1):  # 分区编号保持默认，直接按 Enter</span><br><span class="line">First sector (2048-125829086, default 2048):  # 第一个扇区，保持默认</span><br><span class="line">Last sector, +/-sectors or +/-size&#123;K,M,G,T,P&#125; (2048-125829086, default 125827071): +512M  # 创建 512MiB 大小的分区</span><br><span class="line"></span><br><span class="line">Do you want to remove the signature? [Y]es/[N]o: Y  # 清除已有的签名，如果是全新的硬盘，则没有此步</span><br><span class="line"></span><br><span class="line">Command (m for help): t  # 输入 t 改变分区类型，请勿遗忘此步</span><br><span class="line">Selected partition 1</span><br><span class="line">Partition type or alias (type L to list all): 1  # 输入 1 代表 EFI 类型</span><br><span class="line">Changed type of partition &#x27;Linux filesystem&#x27; to &#x27;EFI System&#x27;.</span><br><span class="line"></span><br><span class="line">Command (m for help): p  # 输入 p 打印分区表，请检查分区是否有误，如果有误，请输入 q 直接退出</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): w  # 输入 w 写入分区表，该操作不可恢复</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>分区格式化<br>格式化根分区：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.ext4 /dev/nbme0n1p2</span><br></pre></td></tr></table></figure>

<p>格式化swap分区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /dev/nvme0n1p3</span><br></pre></td></tr></table></figure>

<p>格式化EFI分区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -F 32 /dev/nvm10n1p1</span><br></pre></td></tr></table></figure>
</li>
<li><p>挂载分区<br>挂载根分区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # mount /dev/nvme0n1p2 /mnt</span><br></pre></td></tr></table></figure>

<p>创建boot目录并挂载EFI分区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # mount --mkdir /dev/nvme0n1p1 /mnt/boot</span><br></pre></td></tr></table></figure>

<p>启用swap分区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # swapon /dev/nvme0n1p3</span><br></pre></td></tr></table></figure>
</li>
<li><p>选择镜像源<br> 非常重要，由于众所周知的网络环境的问题，默认的镜像源会对之后的下载和更新过程带来极大的速度影响。<br> 推荐使用如下命令筛选镜像源，这将为您选出位于平均同步延迟在 3 小时以内的，位于中国的 https 软件源，并根据速度排序。指定 –completion-percent 95（默认为100）的目的是防止忽略可用的镜像源。</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # reflector -p https -c china --delay 3 --completion-percent 95 --sort rate --save /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>

<p> 也可以手动编辑&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlist文件来选择镜像源</p>
</li>
<li><p>安装基础包</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # pacstrap -K /mnt base linux linux-firmware</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置系统<br>生成fstab文件</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>

<p>chroot到新安装的系统</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@archiso ~ # arch-chroot /mnt</span><br></pre></td></tr></table></figure>

<p>设置时区</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure>

<p>设置硬件时间</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# hwclock --systohc</span><br></pre></td></tr></table></figure>

<p>本地化<br>安装vim和终端字体</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# pacman -S vim terminus-font</span><br></pre></td></tr></table></figure>

<p>编辑locale.gen</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# vim /etc/locale.gen</span><br></pre></td></tr></table></figure>

<p>删除如下两行开头的#</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">en_US.UTF-8 UTF-8</span><br><span class="line"></span><br><span class="line">zh_CN.UTF-8 UTF-8</span><br></pre></td></tr></table></figure>

<p>生成locale</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# locale-gen</span><br></pre></td></tr></table></figure>

<p>创建并编辑locale.conf</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# vim /etc/locale.conf</span><br></pre></td></tr></table></figure>

<p>按i进入编辑模式并输入如下语句后保存退出</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>网络配置</strong><br>设置hostname</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# vim /etc/hostname</span><br><span class="line">----------------------------------</span><br><span class="line">我的主机名</span><br></pre></td></tr></table></figure>

<p>安装网络管理器</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# pacman -S networkmanager</span><br></pre></td></tr></table></figure>

<p>设置网络管理器开机自启</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# systemctl enable NetworkManager.service</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置root密码</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# passwd</span><br><span class="line">New password:  # 请输入密码，这里不会有显示，这是正常现象</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: password updated successfully</span><br></pre></td></tr></table></figure>
</li>
<li><p>引导加载程序<br>根据cpu型号安装对应微码</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# pacman -S intel-ucode</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# pacman -S amd-ucode</span><br></pre></td></tr></table></figure>

<p>安装GRUB软件包</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# pacman -S grub efibootmgr</span><br><span class="line"></span><br><span class="line">[root@archiso ~]# grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB</span><br></pre></td></tr></table></figure>

<p>生成GRUB配置</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@archiso ~]# grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>

<p><strong>一定要确保GRUB配置生成无误再重启！！！！</strong></p>
</li>
<li><p>重启<br>输入exit退出chroot环境<br>输入reboot重启系统，此时拔出安装U盘</p>
</li>
</ol>
<p><strong>至此Arch系统已经在电脑上安装完成了，虽然没有图形界面，但已经能够以命令行形式运行。</strong></p>
<hr>
<h3 id="系统配置"><a href="#系统配置" class="headerlink" title="系统配置"></a>系统配置</h3><ol>
<li><p>登录root用户</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Arch Linux 6.x.x-arch1-1 (tty1)</span><br><span class="line">xxxx login: root  # 请输入 root，以 root 身份登录</span><br><span class="line">Password: # 请输入密码，这里不会显示“*”，是正常现象</span><br><span class="line">[root@xxxx ~]# </span><br></pre></td></tr></table></figure>
</li>
<li><p>连接互联网</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@xxxx ~]# nmcli device wifi list  # 列出可连接的 WiFi</span><br><span class="line">[root@xxxx ~]# nmcli device wifi connect &quot;SSID&quot; password &quot;密码&quot;  # 连接 WiFi</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建普通用户</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@xxxx ~]# useradd -m -G wheel 用户名  # 创建用户，并为其创建家目录，将其加入 wheel 组</span><br><span class="line">[root@xxxx ~]# passwd 用户名</span><br><span class="line">New password:</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: password updated successfully</span><br></pre></td></tr></table></figure>
</li>
<li><p>权限提升<br> 安装sudo</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@xxxx ~]# pacman -S sudo</span><br></pre></td></tr></table></figure>

<p> 编辑 &#x2F;etc&#x2F;sudoers</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@xxxx ~]# vim /etc/sudoers</span><br></pre></td></tr></table></figure>

<p> 去掉“%wheel ALL&#x3D;(ALL:ALL) ALL”前面的“#”<br> 现在我们切换身份到新创建的用户。</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@xxxx ~]# su - 用户名</span><br><span class="line">[用户名@xxxx ~]$ </span><br></pre></td></tr></table></figure>
</li>
<li><p>配置pacman<br> 编辑&#x2F;etc&#x2F;pacman.conf文件<br> 首先，为了启用颜色显示和并行下载，请取消 Color 和 ParallelDownloads &#x3D; 5 之前的“#”。<br> 其次，如果您需要在 Arch Linux 中运行 Steam 和 Wine（一款模拟器，可以在 Linux 中运行 Windows 程序），请启用 multilib 仓库。该仓库提供 32 位软件包。请搜索“multilib”，取消下述两行之前的“#”。<br> 然后，推荐您启用 archlinuxcn 仓库。该仓库由 Arch Linux CN 社区维护，提供了大量适合国人使用的软件包。请在文件最后新建一行，输入</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/pacman.conf</span><br><span class="line">----------------</span><br><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://mirrors.bfsu.edu.cn/archlinuxcn/$arch</span><br></pre></td></tr></table></figure>

<p> 之后，保存并退出。请更新本地软件数据库并安装 archlinuxcn-keyring</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># pacman -Syyu archlinuxcn-keyring</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装图形界面<br> 是的，终于进行到安装图形界面的步骤了，在这里不推荐使用Gnome，更不推荐配置更加复杂，适配更差的其他桌面环境，仅建议使用完整的KDE桌面，方便入门学习使用。<br> 安装Intel核显驱动，如果是AMD处理器请自行搜索</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xf86-video-intel</span><br></pre></td></tr></table></figure>

<p> 安装Xorg，sddm并设置开机自启</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -S xorg sddm</span><br><span class="line">systemctl enable sddm</span><br></pre></td></tr></table></figure>

<p> 安装KDE桌面及附属组件应用</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S plasma kde-applications</span><br></pre></td></tr></table></figure>

<p> 再次重启系统，就能通过sddm和kde图形界面进入系统了，注意，此时输入的密码已经是之前设置的普通用户的密码，而不是最开始设置的root用户密码。</p>
</li>
<li><p>中文设置及中文输入法<br> 如上安装完成后，在kde设置中应该已经可以选择Chinese语言选项，如果没有，请参考<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%9C%AC%E5%9C%B0%E5%8C%96">简体中文本地化)</a>中的配置说明中的locale部分进行配置，对于其他软件中的中文化配置，在此网页中也有详细说明。<br> 中文输入法目前推荐使用fcitx5，安装及配置参考：<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/Fcitx5">Fcitx5</a><br> 日常使用中需要Microsoft相关字体的配置参考：<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%BE%AE%E8%BD%AF%E5%AD%97%E4%BD%93">微软字体</a>，推荐使用复制文件的方法，较快</p>
</li>
<li><p>aur源的使用及配置<br> 由于Linux本来可用软件数就不多，分发又复杂，因此有很大一部分软件由arch用户自行编译发布，即aur仓库。通常使用yay来下载aur中的软件。<br> 安装yay</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S yay</span><br></pre></td></tr></table></figure>

<p> 之后使用yay安装，卸载，搜索应用的方法与pacman大致相同，可自行搜索相关页面，参考<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/Pacman">pacman - Arch Linux 中文维基</a></p>
</li>
<li><p>常用软件<br> 参考<a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E5%BB%BA%E8%AE%AE%E9%98%85%E8%AF%BB#top-page">建议阅读 - Arch Linux 中文维基 (archlinuxcn.org)</a>中的中国大陆推荐解决方案一节，此页面中的其他部分也有一定参考意义。<br> 在此列出一些常用软件的安装命令，仅供参考</p>
 <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yay -S linuxqq</span><br><span class="line">ysy -S visual-studio-code-bin</span><br><span class="line">yay -S netease-cloud-music</span><br><span class="line">yay -S microsoft-edge-stable-bin</span><br><span class="line">yay -S wps-office-cn wps-office-mui-zh-cn ttf-wps-fonts</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>建议：定期（至少每周，推荐每天）运行系统更新命令进行滚动更新。</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -Syu</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/project/tags/Arch/" rel="tag"># Arch</a>
              <a href="/project/tags/Linux/" rel="tag"># Linux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/project/2023/09/17/2023-09-17-%E4%BA%8C%E6%AC%A1%E5%85%83%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" rel="prev" title="ACGN知识点">
                  <i class="fa fa-angle-left"></i> ACGN知识点
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ceiba ZH</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Word count total">3k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">12 mins.</span>
  </span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/project/js/comments.js"></script><script src="/project/js/utils.js"></script><script src="/project/js/motion.js"></script><script src="/project/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/project/js/third-party/math/mathjax.js"></script>



</body>
</html>
